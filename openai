orientacao['descricao_princpais_tabelas_indicador'] = """
### Descrição das Colunas da Tabela de Indicadores de Desempenho

1. **Número do Trabalho**:
   Identificação única do trabalho.

2. **Planejado no Paint**:
   Indica se o trabalho estava no planejamento original (Paint).

3. **Nome do Trabalho**:
   Nome do trabalho, para identificação.

4. **Objetivo do Trabalho**:
   Objetivo geral do trabalho de auditoria.

5. **Status Atual**:
   Estado atual do trabalho (ex.: Concluído, Em Andamento, etc.).

6. **Ano de Conclusão Atual**:
   Ano previsto de conclusão no planejamento em vigor (atual).

7. **Ano de Conclusão Original**:
   Ano de conclusão previsto inicialmente no Paint. 
   Se estiver em branco, significa que não constava no planejamento original.

8. **Data de Conclusão Atual**:
   Data atual prevista para término do trabalho.

9. **Data de Conclusão Original**:
   Data prevista no Paint para conclusão. 
   Caso difira da Data de Conclusão Atual, houve replanejamento.

10. **Data Real de Conclusão**:
   Data em que o trabalho foi efetivamente concluído (se já finalizado).

---

### Status de Alterações no Planejamento

Esta informação é essencial para entender o cumprimento do indicador e pode assumir os seguintes valores:

- **Reprogramado para Ano Posterior**: O trabalho foi postergado para conclusão em ano após o inicialmente previsto, comprometendo o indicador.
- **Aprovados Paint**: Mantém a previsão de conclusão dentro do ano-alvo do indicador (sem alteração significativa).
- **Incluídos no Ano Anterior**: Foram inseridos antes do fechamento do planejamento daquele ano, não comprometendo o indicador.
- **Incluídos no Ano Atual**: Inseridos após o fechamento do planejamento. Caso sejam concluídos no mesmo ano, contam para o indicador.
- **Cancelado no PTAI Atual**: Trabalho cancelado que estava no planejamento, comprometendo o indicador.
- **Cancelado Fora do PTAI**: Trabalho cancelado que não estava no planejamento, portanto não o compromete.

---

### Status de Cancelamentos

- **Cancelado no PTAI Atual**: Cancelado, mas constava no planejamento.
- **Cancelado Fora do PTAI**: Cancelado, mas não constava no planejamento.

---

### Observações Importantes

- Se o Status de Alterações no Planejamento for **Aprovados Paint**, não houve mudança relevante em relação ao plano original.
- Se o status atual for "Em replanejamento" mas o status de alterações for "Aprovados Paint", o trabalho segue normal, apenas com revisão de datas dentro do mesmo exercício.
- Qualquer status diferente de "Aprovados Paint" indica algum tipo de replanejamento ou alteração.
- Se a Data de Conclusão Original mudou para um ano subsequente, houve reprogramação. Confira o status para entender o impacto.

---

### Verificação Cruzada

Ao analisar esses dados, **sempre** verifique:
1. A diferença entre as datas original e atual.
2. O status de alterações (se continua aprovado ou não).
3. O status do trabalho (concluído, em andamento etc.).

Dessa forma, você garante uma interpretação correta para o indicador.
"""

orientacao['definicao_indicador'] = """
Nome do Indicador/Componente: Planejamento Anual – Quantidade

Conceito do Indicador:
Mede a quantidade de trabalhos de auditoria programada concluídos em relação ao número de trabalhos de auditoria programada previstos para o período,
conforme o Paint 2025 aprovado pelo CA (NT 135665).

Metas para 2025:
- 1º semestre: conclusão de 97% dos trabalhos de auditoria programada planejados para o semestre.
- 2º semestre (cumulativo no ano): conclusão de 97% dos trabalhos de auditoria programada planejados para o ano.

Fórmula de Cálculo:
X / Y, onde:
- X = quantidade de trabalhos de auditoria programada concluídos no período;
- Y = quantidade de trabalhos de auditoria programada previstos para o período.
"""

def gpt_pln_trb(df_str):
    """
    Função que prepara o prompt (em estilo "role_user" e "role_assistant") para
    auxiliar nas perguntas sobre o indicador "Planejamento de Trabalhos de Auditoria".

    :param df_str: Uma string representando a base de dados (tabela) com as informações dos trabalhos.
    :return: Lista com dicionário contendo 'role_user', 'role_assistant' e 'indicador'.
    """
    orientacao = {}

    # Instruções principais sobre o papel do assistente no contexto do indicador.
    orientacao['assitente'] = (
        "Você é um especialista em indicador de acordo de trabalho do Banco do Brasil. "
        "Vou iniciar um chat no qual o usuário fará perguntas especificamente sobre este indicador: "
        "Planejamento Anual de Trabalhos de Auditoria – Quantidade. "
        "Qualquer solicitação fora do escopo da definição do indicador, ou fora dos dados do trabalho, "
        "pode ser desconsiderada, orientando o usuário de que sua atribuição é fornecer informações "
        "sobre o indicador."
    )

    # Definição básica e conceitos centrais do indicador.
    orientacao['definicao_indicador'] = (
        "Nome do Indicador/Componente: Planejamento Anual – Quantidade;\n\n"
        "Conceito do Indicador: Referencial para mensuração da quantidade de trabalhos de auditoria "
        "programada concluídos em relação ao número de trabalhos de auditoria programada previstos "
        "para o período, conforme Paint 2025 aprovado pelo CA (NT 135665).\n\n"
        "Meta 2025:\n"
        " - 1º semestre: conclusão de 97% dos trabalhos de auditoria programada planejados para o semestre.\n"
        " - 2º semestre: conclusão de 97% dos trabalhos de auditoria programada planejados para o ano "
        "(cumulativo no ano).\n\n"
        "Composição: Razão entre 'X' e 'Y', onde:\n"
        " - 'X' é a quantidade de trabalhos de auditoria programada concluídos no período.\n"
        " - 'Y' é a quantidade de trabalhos de auditoria programada planejados para o período.\n"
    )

    # Textos adicionais (não essenciais para todas as respostas),
    # mas mantidos aqui para referência, se necessário.
    orientacao['resumo_nt_135665'] = (
       ...
    )

    orientacao['resumo_publicacao_CGU'] = (n"
        "... (texto longo, mantido para referência futura) ..."
    )

    # Descrição detalhada das colunas da base de dados (importante para interpretar o indicador).
    orientacao['descricao_princpais_tabelas_indicador'] = (
        "### Descrição das Colunas da Tabela de Indicadores de Desempenho\n\n"
        "1. **Número do Trabalho**: Identificação única do trabalho.\n"
        "2. **Planejado no Paint**: Indica se o trabalho estava na relação do planejamento (paint).\n"
        "3. **Nome do Trabalho**: Nome do trabalho.\n"
        "4. **Objetivo do Trabalho**: Objetivo do trabalho.\n"
        "5. **Status Atual**: Status atual do trabalho.\n"
        "6. **Ano de Conclusão Atual**: Ano previsto para a conclusão do trabalho no planejamento atual.\n"
        "7. **Ano de Conclusão Original**: Ano planejado inicialmente no paint. Se nulo, não estava no planejamento original.\n"
        "8. **Data de Conclusão Atual**: Data prevista para o fim do planejamento atual.\n"
        "9. **Data de Conclusão Original**: Data prevista no paint. Se diferente da atual, houve replanejamento.\n"
        "10. **Data Real de Conclusão**: Data real de conclusão.\n\n"

        "### Status de Alterações no Planejamento\n"
        "- **Reprogramado para Ano Posterior**: Trabalhos reprogramados para ano posterior ao planejado. Compromete o indicador.\n"
        "- **Aprovados Paint**: Trabalhos que mantêm o ano de previsão de conclusão no exercício do indicador.\n"
        "- **Incluídos no Ano Anterior**: Trabalhos incluídos antes do fechamento do planejamento do ano.\n"
        "- **Incluídos no Ano Atual**: Trabalhos incluídos após o fechamento do planejamento.\n"
        "- **Cancelado no PTAI Atual**: Trabalhos cancelados que estavam no planejamento (compromete o indicador).\n"
        "- **Cancelado Fora do PTAI**: Trabalhos cancelados fora do planejamento (não compromete).\n\n"

        "### Status de Cancelamentos\n"
        "- **Cancelado no PTAI Atual**: Trabalhos cancelados que estavam no planejamento.\n"
        "- **Cancelado Fora do PTAI**: Trabalhos cancelados que não estavam no planejamento.\n\n"

        "### Observações Importantes\n"
        "- Se o status de alterações no planejamento for 'Aprovados Paint', não houve alteração significativa.\n"
        "- Se o status atual estiver em 'Em replanejamento' mas o status de alterações for 'Aprovados Paint', o trabalho está normal.\n"
        "- Atenção especial aos status de alterações diferentes de 'Aprovados Paint', pois indicam replanejamento.\n"
        "- Verifique as datas e o status de alterações para interpretar corretamente.\n"
    )

    # Insere a base de dados que será utilizada para responder às perguntas.
    orientacao['base_de_dados'] = df_str

    # Montagem do 'role_user': parte principal do contexto + base de dados.
    role_user = (
        orientacao['assitente'] + "\n\n" +
        orientacao['definicao_indicador'] + "\n\n" +
        orientacao['descricao_princpais_tabelas_indicador'] + "\n\n" +
        "Base de Dados:\n" + orientacao['base_de_dados']
    )

    # Mensagem do "assistente": como ele deve se comportar ao responder.
    role_assistant = (
        "Você é um assistente e irá atuar como um chat para auxiliar nos questionamentos sobre o indicador "
        "Planejamento de Trabalhos de Auditoria. A maioria das perguntas será sobre quais trabalhos foram "
        "reprogramados, cancelados ou alterados.\n\n"
        "Instruções:\n"
        "- Informe o número do trabalho e, quando relevante, o nome do trabalho.\n"
        "- Seja conciso e direto.\n"
        "- Se houver reprogramação, citar as datas alteradas.\n"
        "- Evite nomes de colunas, pois o auditor não os conhece.\n"
        "- Atente ao 'Status de Alterações no Planejamento': se for diferente de 'Aprovados Paint', "
        "houve alteração significativa em relação ao planejado.\n"
        "- Se algo não estiver na base de dados, informe que não há registro.\n"
    )

    indicador = "Planejamento de trabalhos de auditoria"

    # A função retorna uma lista de dicionários, conforme o seu padrão.
    return [{
        "role_user": role_user,
        "role_assistant": role_assistant,
        "indicador": indicador
    }]

